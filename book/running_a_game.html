<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Running a Game - Unreal Development</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="development_setup.html"><strong aria-hidden="true">1.</strong> Development Setup</a></li><li class="chapter-item expanded "><a href="creating_unreal_project_from_scratch.html"><strong aria-hidden="true">2.</strong> Creating an Unreal Project</a></li><li class="chapter-item expanded "><a href="setup_unreal_project_from_scratch.html"><strong aria-hidden="true">3.</strong> Setup an Unreal Project</a></li><li class="chapter-item expanded "><a href="building_unreal_project_from_scratch.html"><strong aria-hidden="true">4.</strong> Build an Unreal Project</a></li><li class="chapter-item expanded "><a href="opening_unreal_project_from_scratch.html"><strong aria-hidden="true">5.</strong> Open an Unreal Project</a></li><li class="chapter-item expanded "><a href="running_a_game.html" class="active"><strong aria-hidden="true">6.</strong> Running a Game</a></li><li class="chapter-item expanded "><a href="quality_of_life_improvements.html"><strong aria-hidden="true">7.</strong> Quality of Life</a></li><li class="chapter-item expanded "><a href="testing_the_setup.html"><strong aria-hidden="true">8.</strong> Testing the Setup</a></li><li class="chapter-item expanded "><a href="conclusion.html"><strong aria-hidden="true">9.</strong> Conclusion</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="altering_the_project.html">Appendix 1 - Altering the Template</a></li><li class="chapter-item expanded affix "><a href="additional_workflow_items.html">Appendix 2 - Additional Workflow Items</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Unreal Development</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="running-a-game"><a class="header" href="#running-a-game">Running a Game</a></h1>
<p>In the <a href="./opening_unreal_project_from_scratch.html">previous section</a> we learned how we are able to quickly iterate over our game in a development setting, running from editor binaries. But once your game is complete, you can package a release version for distribution. Before an Unreal project can be distributed to users, it must be properly packaged. Packaging ensures that all code and content is up to date and in the proper format to run on the desired target platform.</p>
<h2 id="building-a-game"><a class="header" href="#building-a-game">Building a Game</a></h2>
<p>All we must do to run a standalone game is invoke the same build process, passing in our project's Game target instead of its Editor target. This'll run through the same build process, but instead of linking our individual modules into DLL files, it'll link our project against all the required Engine code and generate a single executable that runs our game, with all the editor-specific functionality stripped out. </p>
<ul>
<li>Open your terminal
<ul>
<li>CTRL + Tilde (~)</li>
<li>Type <code>{UE-BatchFiles}/Build.bat</code>
<ul>
<li><code>I:\Epic Games Unreal Engine\UE_5.3\Engine\Build\BatchFiles\Build.bat</code></li>
</ul>
</li>
<li>Define a Target that you would like to build
<ul>
<li><code>{projectname}</code></li>
</ul>
</li>
<li>Define a Platform that would like to build for
<ul>
<li><code>Win64</code></li>
</ul>
</li>
<li>Define a build configuration
<ul>
<li><code>Development</code></li>
</ul>
</li>
<li>Define a path to the .uproject</li>
<li>Define <code>-waitMutex</code> and <code>-NoHotReload</code></li>
</ul>
</li>
</ul>
<pre><code class="language-shell">{UE-BatchFiles}/Build.bat Patrol Win64 Development “{project_path}/Patrol.uproject&quot; -waitMutex -NoHotReload
</code></pre>
<p><em>Note: if your path towards the batch file contains spaces encapsulate it with (“) and start your command with a “&amp;“</em></p>
<p><img src="./resources/unreal-generated-binaries.png" alt="Generated Binaries" /></p>
<h2 id="cooking-content"><a class="header" href="#cooking-content">Cooking Content</a></h2>
<p>Before running our executable, we must first take the essential step of preparing our content also known as &quot;cooking&quot;. <strong>In the realm of Unreal, content assets are stored in specific internal formats,</strong> such as PNG for textures and WAV for audio. However, this content needs to be converted to different formats for the various platforms, either because the platform uses a proprietary format, does not support the format Unreal uses to store the asset, or a more memory- or performance-effective format exists.</p>
<p>This conversion process, <strong>known as &quot;cooking,&quot;</strong> is crucial for the seamless integration of content into the final game. We can start this process either through command-line operations or by utilizing in-editor tools. It's important to note that, for some platforms, all content must undergo the cooking process before it can be used on the device to ensure proper functionality. You should verify with the specifications of the platform they are targeting to ensure compliance with these requirements.</p>
<p>There are <strong>two ways to cook content</strong> for your projects</p>
<ul>
<li><strong>by the book</strong></li>
<li><strong>on the fly</strong></li>
</ul>
<p><img src="./resources/unreal-cooking-manner.png" alt="How would you like to cook" /></p>
<h3 id="by-the-book"><a class="header" href="#by-the-book">By the Book</a></h3>
<p>Cook by the book <strong>performs the entirety of the cook process ahead of time</strong> allowing for the build to deploy the cooked assets all at once rather than as needed while playing the level (if you were using a cook server). This option is useful for developers who are not iterating on individual assets or for those who want the game to perform at full-speed without waiting for a server to deliver the necessary cooked content. Typically, performance testing and playtests will want to use this method.</p>
<p>When performing a cook by the book, there is no extra setup required for the build.</p>
<h3 id="on-the-fly"><a class="header" href="#on-the-fly">On the Fly</a></h3>
<p>When you choose to cook content on the fly (COTF), it will <strong>delay cooking it until after the game has been deployed to the platform</strong>. Only the executable and some other basic files are installed, which use network communication with a Cook Server to make requests on-demand as the content is needed. COTF allows for faster iteration for developers who will be making changes to content regularly or those who will only be exploring sections of the game.</p>
<p>To cook on the fly, you will first need to start a Cook Server on a machine which has the full project available to it. This can be either your local machine or a remote server which performs the cook.</p>
<p>Cooking on the fly is specified with the command-line argument: <code>-cookonthefly</code>. This launches a server which waits for a game to connect and then serves the cooked data as needed. Requires <code>-filehostip=&lt;Server IP&gt;</code> on the game's command line to connect with the server.</p>
<p>For more information on how to cook on the fly please visit the <a href="https://docs.unrealengine.com/4.27/en-US/SharingAndReleasing/Deployment/BuildOperations/">Official Documentation</a></p>
<h3 id="cooking-our-content"><a class="header" href="#cooking-our-content">Cooking our Content</a></h3>
<p>Given that we've already executed our entire pipeline via the command line, it's sensible to continue with the cooking process using the same method. We will cook our content <code>By the book</code> as we don't have or own a server to hook up.</p>
<ul>
<li>Run {UE-Binaries}\UnrealEditor-Cmd.exe</li>
<li>Define a Target that you would like to build
<ul>
<li><code>{projectname}</code></li>
</ul>
</li>
<li>Define a task
<ul>
<li><code>run=cook</code></li>
</ul>
</li>
<li>Define a target platform
<ul>
<li><code>targetplatform=Windows</code>
<ul>
<li>Additional platforms could be added here: - <code>targetplatform=Windows+PS4+XboxOne</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-shell">{UE-Binaries}\UnrealEditor-Cmd.exe&quot; “${project_path}\Patrol.uproject -run=Cook -TargetPlatform=Windows
</code></pre>
<p><em>Note: if your path towards the batch file contains spaces encapsulate it with (“) and start your command with a “&amp;“</em></p>
<p>Other command-line arguments for the cooking process are as followed:</p>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>iterate</strong></td><td>Specifies the cooker only cook items that are out of date. Without this option, the sandbox directory is deleted and everything is recooked.</td></tr>
<tr><td><strong>Map</strong></td><td>Specifies the map(s) to build.</td></tr>
<tr><td><strong>MapIniSection</strong></td><td>Specifies a section from the ini files which contains map names. Cooker will cook all maps specified in the section specified.</td></tr>
<tr><td><strong>UnVersioned</strong></td><td>Saves all of the cooked packages without versions. These are then assumed to be the current version on load.</td></tr>
<tr><td><strong>CookAll</strong></td><td>Cooks everything.</td></tr>
<tr><td><strong>Compressed</strong></td><td>Tells the cooker to compress the cooked packages.</td></tr>
</tbody></table>
<p>After our content is cooked, we end up with a Saved/Cooked directory. This is where our standalone game exectuable will find all the assets it needs to load at runtime</p>
<p><img src="./resources/unreal-cooked-assests-location.png" alt="Cooked Assets" /></p>
<p>Now we can run our game this should be functionally the same as running from editor binaries, except we're now using cooked data loaded straight from disk the engine isn't building any assets on demand at runtime. We've still built in the Development configuration, though, so we have access to all the same developer tools.</p>
<ul>
<li>Run {projectdirectory}/Binaries/Win64/{projectname}.exe</li>
<li>Define <code>-log</code></li>
<li>Define <code>-windowed resx=1280 resy=720</code></li>
</ul>
<pre><code class="language-shell">${projectdirectory}/Binaries/Win64/{projectname}.exe -log -windowed -resx-1280 -resy=720
</code></pre>
<p><em>Note: if your path towards the batch file contains spaces encapsulate it with (“) and start your command with a “&amp;“</em></p>
<p><img src="./resources/unreal-standalone-game.png" alt="Standalone Game" /></p>
<p>So sure, we don't need to use Visual Studio to build and run our project. That's cool and all but having to invoke this batch file with these specific arguments is kind of a pain in the a**. In the <a href="./quality_of_life_improvements.html">next section</a> we will introduce some quality of life improvements to prevent this.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="opening_unreal_project_from_scratch.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="quality_of_life_improvements.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="opening_unreal_project_from_scratch.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="quality_of_life_improvements.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
