<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Setup an Unreal Project - Unreal Development</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="development_setup.html"><strong aria-hidden="true">2.</strong> Development Setup</a></li><li class="chapter-item expanded "><a href="creating_unreal_project_from_scratch.html"><strong aria-hidden="true">3.</strong> Creating an Unreal Project</a></li><li class="chapter-item expanded "><a href="setup_unreal_project_from_scratch.html" class="active"><strong aria-hidden="true">4.</strong> Setup an Unreal Project</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Unreal Development</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="setup-an-unreal-project-from-scratch"><a class="header" href="#setup-an-unreal-project-from-scratch">Setup an Unreal Project from Scratch</a></h1>
<p>In the <a href="./creating_unreal_project_from_scratch.html">previous section</a> we delved into the essence of a .uproject file and its interaction with the modules and plugins defined within your project. Additionally, we explored Target Rule Definitions, which outline the specifications for building a project. With the project now established, let's proceed to incorporate some source code for the module we've created. By now, you've likely recognized the common convention in Unreal Engine to organize a module's source code into Public and Private subdirectories. The Public directory houses headers that necessitate visibility to other modules, while the Private directory encompasses all implementation details specific to this module.</p>
<p>Let's start by doing that.</p>
<ul>
<li>Navigate to your Source/{projectname}{modulename} directory</li>
<li>Add a Private directory</li>
<li>Add a Public directory</li>
</ul>
<p><img src="adding-public-private-directory.png" alt="Adding Public and Private source directories" /></p>
<h2 id="module-build-rules"><a class="header" href="#module-build-rules">Module Build Rules</a></h2>
<p>Before we add any source code we will need an additional C# file, namly the Module Build Rules. Modules are the building blocks of UE4. The engine is implemented as a large collection of modules, and games supply their own modules to augment them. Each module encapsulates a set of functionality, and can provide a public interface and compile environment (with macros, include paths, and so on) for use by other modules. Modules are declared through C# source files with a .build.cs extension, and are stored under your project's Source directory. The C++ source code belonging to a module is stored next to to the .build.cs file, or in subdirectories of it. Each .build.cs file declares a class deriving from the <a href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Programs/UnrealBuildTool/Configuration/ModuleRules.cs">ModuleRules</a> base class, and sets properties controlling how it should be built from its constructor. These .build.cs files are compiled by UnrealBuildTool and constructed to determine the overall compile environment.</p>
<p>The typical structure for a .build.cs file is as follows.</p>
<pre><code class="language-Csharp">using UnrealBuildTool;
using System.Collections.Generic;

public class PatrolCore : ModuleRules
{
    public PatrolCore(ReadOnlyTargetRules Target) : base(Target)
    {
        // Settings go here
    }
}
</code></pre>
<p>Numerous properties are accessible from the base class, the details of which are too extensive to cover within this page. For a comprehensive list of all available properties, I recommend consulting the <a href="https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/BuildTools/UnrealBuildTool/ModuleFiles/">Official Unreal Documentation</a> or examining the <a href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Programs/UnrealBuildTool/Configuration/ModuleRules.cs">Source Code</a> (Regrettably, not all properties are exhaustively described within the documentation.). However, I'd like to direct your attention to some properties that may prove particularly useful.</p>
<ul>
<li>
<p><strong>PCHUsage</strong> What type of PCH to use for this module</p>
<ul>
<li>Default: Engine modules use shared PCHs, game modules do not</li>
<li>NoPCHs: Never use any PCHs.</li>
<li>NoSharedPCHs: Never use shared PCHs.  Always generate a unique PCH for this module if appropriate</li>
<li>UseSharedPCHs: Shared PCHs are OK!</li>
<li>UseExplicitOrSharedPCHs: Shared PCHs may be used if an explicit private PCH is not set through PrivatePCHHeaderFile. In either case, none of the source files manually include a module PCH, and should include a matching header instead.</li>
</ul>
</li>
<li>
<p><strong>IWYUSupport</strong> what extent a module supports include-what-you-use</p>
<ul>
<li>None: code does not even compile. IWYU needs to skip this module entirely.</li>
<li>KeepAsIs: Module could be modified with iwyu but we want it to stay the way it is and handle changes manually.</li>
<li>KeepAsIsForNow: Module is parsed and processed. This means that from the outside it is stripped for includes even though the files are not modified. This can be used to defer iwyu work on a module. When it comes to transitive includes this module is seen as modified from the outside.</li>
<li>KeepPublicAsIsForNow: Same as KeepAsIsForNow but will allow iwyu to update private headers and cpp files.</li>
<li>Full: Full iwyu support. When running with -Mode=IWYU this module will be modified if needed</li>
</ul>
</li>
<li>
<p><strong>PublicDependencyModuleNames</strong> List of public dependency module names (no path needed) (automatically does the private/public include). These are modules that are required by our public source files.</p>
</li>
<li>
<p><strong>PrivateDependencyModuleNames</strong> List of private dependency module names.  These are modules that our private code depends on but nothing in our public include files depend on.</p>
</li>
</ul>
<h2 id="populating-a-build-rules"><a class="header" href="#populating-a-build-rules">Populating a Build Rules</a></h2>
<ul>
<li>Navigate to Source/{projectname}{modulename} directory</li>
<li>Create a new Module Build Rule file
<ul>
<li>{projectname}{modulename}.Build.cs</li>
<li>We can use the snippet <strong>umb</strong> to autocomplete this file</li>
</ul>
</li>
<li>Specify the dependent libraries for this module
<ul>
<li>Core</li>
<li>CoreUObject</li>
<li>Engine</li>
</ul>
</li>
</ul>
<p><img src="populate-module-build-rules-definition.png" alt="Populate Module Build Rules Definition" /></p>
<h2 id="module-source-code"><a class="header" href="#module-source-code">Module Source Code</a></h2>
<p>Every module necessitates, at minimum, a module definition, typically found in a source file bearing the same name as the module. This module definition help Unreal know how to handle our module when it loads and unloads it. To commence, we'll add a public header named &quot;{projectname}{modulename}.h&quot;. Additionally, we should create a corresponding &quot;{projectname}{modulename}.cpp&quot; file. Here, we register our module implementation as the primary module for our game. Each project mandates precisely one module designated as the primary game module. This primary module functions as the entry point for the project. Upon loading your project, the engine initiates by loading this primary module, which in turn initializes other modules and components as necessary. This systematic approach ensures a clear starting point for loading and running your project. By designating a primary module, Unreal adeptly manages dependencies. Other modules and parts of the game can count on the main module to load first. This helps keep everything organized and makes it easier to manage how different parts of the game depend on each other. While it might appear more adaptable to permit specifying regular modules without a primary module, such an approach could introduce ambiguity and complicate dependency management and project initialization. Requiring a primary module encourages best practices in project organization and contributes to the seamless execution of projects within Unreal.</p>
<p><em>Note:</em> 
<em>For more information about the Module Loading please visit the following files:</em></p>
<ul>
<li><em><a href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Runtime/Core/Public/Modules/ModuleManager.h">ModuleManager.h</a></em></li>
<li><em><a href="https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Source/Runtime/Core/Private/Modules/ModuleManager.cpp">ModuleManager.cpp</a></em></li>
</ul>
<p><em>For following the loading and unloading process of the Modules look for StartupModule and ShutdownModule</em></p>
<h2 id="creating-a-module-definition"><a class="header" href="#creating-a-module-definition">Creating a Module Definition</a></h2>
<ul>
<li>Navigate to Source/{projectname}{modulename}/Public</li>
<li>Create a new Header file
<ul>
<li>{modulename}.h</li>
<li>We can use the snipper <strong>umh</strong> to autocomplete this file</li>
</ul>
</li>
</ul>
<p><img src="create-module-definition-header.png" alt="Create Module Definition Header" /></p>
<ul>
<li>Navigate to Source/{projectname}{modulename}/Private</li>
<li>Create a new Source file
<ul>
<li>{modulename}.cpp</li>
<li>We can use the snipper <strong>umcp</strong> to autocomplete this file</li>
</ul>
</li>
</ul>
<p><img src="create-module-definition-source.png" alt="Create Module Definition Source" /></p>
<p>We will also add a Log category that is specific to our module. These files are internal to our module, so we can define the <code>Log.h</code> and <code>Log.cpp</code> within the Private directory of our module. Now from any source file within our module we can <code>#include Log.h</code> and add log output using an Unreal log line (<code>UE_LOG</code>). This will show up in the console output and the log files for our game, and we can filter by our category to get output from this module specifically.</p>
<ul>
<li>Navigate to Source/{projectname}{modulename}/Public</li>
<li>Create a new Header file
<ul>
<li>Log.h</li>
<li>We can use the snipper <strong>ulh</strong> to autocomplete this file</li>
</ul>
</li>
</ul>
<p><img src="create-log-definition-header.png" alt="Create Log Definition Header" /></p>
<ul>
<li>Navigate to Source/{projectname}{modulename}/Private</li>
<li>Create a new Source file
<ul>
<li>Log.cpp</li>
<li>We can use the snipper <strong>ulc</strong> to autocomplete this file</li>
</ul>
</li>
</ul>
<p><img src="create-log-definition-source.png" alt="Create Log Definition Source" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="creating_unreal_project_from_scratch.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="creating_unreal_project_from_scratch.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
